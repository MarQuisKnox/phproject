<check if="{{ !empty(@user.id) }}">
	<form id="dependency_form" role="form" class="form-horizontal">
		<input type="hidden" name="action" value="add_dependency">
		<div class="form-group">
			<label class="col-md-3"><strong> {{ @dict.task_depends }} </strong></label>
			<div class="col-md-2">
				<input type="text" class="form-control input-sm" name="id" value="" required>
			</div>
			<div class="col-md-1">
				<select class="form-control input-sm" name="type_id">
					<option>FS</option>
					<option>FF</option>
					<option>SS</option>
					<option>SF</option>
				</select>
			</div>
			<div class="col-md-1">
				<button type="submit" class="btn btn-primary btn-sm">Add  Dependency</button>
			</div>
		</div>
	</form>
</check>
<check if="{{ !empty(@dependencies) }}">
	<true>
		<table class="table table-striped table-responsive table-condensed issue-list dependency-list">
		<thead>
			<tr>
				<th data-sort="int">{{ @dict.cols.id }}</th>
				<th data-sort="string">{{ @dict.cols.title }}</th>
				<th data-sort="string">{{ @dict.cols.type}}</th>
				<th data-sort="string">{{ @dict.cols.author }}</th>
				<th data-sort="string">{{ @dict.cols.assignee }}</th>
				<th data-sort="int">{{ @dict.cols.start }}</th>
				<th data-sort="int">{{ @dict.cols.due }}</th>
				<th data-sort="int">{{ @dict.cols.status }}</th>
				<th data-sort="int"></th>
			</tr>
		</thead>
		<tbody>
			<repeat group="{{ @dependencies }}" value="{{ @item }}">
				<tr data-id="{{ @item.d_id }}" class="{{ @item.status_closed ? 'closed' : '' }}">
					<td><a href="{{ @site.url }}issues/{{ @item.id }}">{{ @item.id }}</a></td>
					<td><a href="{{ @site.url }}issues/{{ @item.id }}">{{ @item.name | esc }}</a></td>
					<td>{{ @item.dependency_type }}</td>
					<td><a href="{{ @site.url }}user/{{ @item.author_username }}">{{ @item.author_name | esc }}</a></td>
					<td><a href="{{ @site.url }}user/{{ @item.owner_username }}">{{ @item.owner_name | esc }}</a></td>
					<td data-sort-value="{{ strtotime(@item.start_date) }}" title="{{ date('M j, Y \\a\\t g:ia', strtotime(@item.start_date)) }}">{{ date("n/j/y", strtotime(@item.start_date)) }}</td>
					<td data-sort-value="{{ strtotime(@item.due_date) ?: 0 }}">{{ !empty(@item.due_date) ? date("n/j", strtotime(@item.due_date)) : "" }}</td>
					<td data-sort-value="{{ @item.status }}">{{ @item.status_name }}</td>
					<td><a href="#" class="delete"><span class="glyphicon glyphicon-remove"></span></a></td>
				</tr>
			</repeat>
		</tbody>
		</table>
	</true>
</check>
<hr>
<check if="{{ !empty(@user.id) }}">
	<form id="dependent_form" role="form" class="form-horizontal">
		<input type="hidden" name="action" value="add_dependent">
		<div class="form-group">
			<label class="col-md-3"><strong> {{ @dict.task_dependency }} </strong></label>
			<div class="col-md-2">
				<input type="text" class="form-control input-sm" name="id" value="" required>
			</div>
			<div class="col-md-1">
				<select class="form-control input-sm" name="type_id">
					<option>FS</option>
					<option>FF</option>
					<option>SS</option>
					<option>SF</option>
				</select>
			</div>
			<div class="col-md-1">
				<button type="submit" class="btn btn-primary btn-sm">Add Dependent</button>
			</div>
		</div>
	</form>
</check>
<check if="{{ !empty(@dependents) }}">
	<true>
		<table class="table table-striped table-responsive table-condensed issue-list dependency-list">
		<thead>
			<tr>
				<th data-sort="int">{{ @dict.cols.id }}</th>
				<th data-sort="string">{{ @dict.cols.title }}</th>
				<th data-sort="string">{{ @dict.cols.type}}</th>
				<th data-sort="string">{{ @dict.cols.author }}</th>
				<th data-sort="string">{{ @dict.cols.assignee }}</th>
				<th data-sort="int">{{ @dict.cols.start }}</th>
				<th data-sort="int">{{ @dict.cols.due }}</th>
				<th data-sort="int">{{ @dict.cols.status }}</th>
				<th data-sort="int"></th>
			</tr>
		</thead>
		<tbody>
			<repeat group="{{ @dependents }}" value="{{ @item }}">
				<tr data-id="{{ @item.d_id }}" class="{{ @item.status_closed ? 'closed' : '' }}">
					<td><a href="{{ @site.url }}issues/{{ @item.id }}">{{ @item.id }}</a></td>
					<td><a href="{{ @site.url }}issues/{{ @item.id }}">{{ @item.name | esc }}</a></td>
					<td>{{ @item.dependency_type }}</td>
					<td><a href="{{ @site.url }}user/{{ @item.author_username }}">{{ @item.author_name | esc }}</a></td>
					<td><a href="{{ @site.url }}user/{{ @item.owner_username }}">{{ @item.owner_name | esc }}</a></td>
					<td data-sort-value="{{ strtotime(@item.start_date) }}" title="{{ date('M j, Y \\a\\t g:ia', strtotime(@item.start_date)) }}">{{ date("n/j/y", strtotime(@item.start_date)) }}</td>
					<td data-sort-value="{{ strtotime(@item.due_date) ?: 0 }}">{{ !empty(@item.due_date) ? date("n/j", strtotime(@item.due_date)) : "" }}</td>
					<td data-sort-value="{{ @item.status }}">{{ @item.status_name }}</td>
					<td><a href="#" class="delete"><span class="glyphicon glyphicon-remove"></span></a></td>
				</tr>
			</repeat>
		</tbody>
		</table>
	</true>
</check>
